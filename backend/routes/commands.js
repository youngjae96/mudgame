const express = require('express');
const router = express.Router();
const { commandHandlers } = require('../commands');

// 명령어별 설명 매핑 (여기서 관리)
const commandDescriptions = {
  '/정보': '내 능력치 확인',
  '/귓': '귓속말(비공개 메시지)',
  '/구매': '아이템 구매',
  '/판매': '아이템 판매',
  '/장착': '장비 장착',
  '/해제': '장비 해제',
  '/장비': '내 장비 정보',
  '/지도': '전체 맵 보기',
  '/텔포': '지역 이동(무인도, 마을 등)',
  '/텔레포트': '맵 내 랜덤 위치 이동',
  '/길드': '길드 관련 명령어',
  '/저장': '데이터 저장',
  '/도움말': '명령어 전체 안내',
  '/귀환': '1번 마을로 귀환',
  '/랭킹': 'TOP 10 스탯 랭킹',
  '/클랜힐': '클랜힐 스크롤 사용',
  '/길': '길드 채팅',
  '/여관': '여관(회복)',
  '/누구': '현재 접속중인 플레이어 목록',
  '/상점': '상점 열기',
  '/상점판매': '상점 판매',
  '/사용사탕': '사탕 사용',
  '/사탕': '사탕 버프 상태',
};

// 세부 예시/서브커맨드/인자 포함 명령어 예시 추가
const extraExamples = [
  { cmd: '/상점 무기', desc: '무기 상점 열기' },
  { cmd: '/상점 무기 2', desc: '무기 상점 2페이지 보기' },
  { cmd: '/상점 방어구', desc: '방어구 상점 열기' },
  { cmd: '/상점 방어구 2', desc: '방어구 상점 2페이지 보기' },
  { cmd: '/상점 잡화', desc: '잡화(물약 등) 상점 열기' },
  { cmd: '/상점 잡화 2', desc: '잡화(물약 등) 상점 2페이지 보기' },
  { cmd: '/상점 구매 [아이템명]', desc: '상점에서 아이템을 구매합니다. 예: /상점 구매 나무검' },
  { cmd: '/상점 판매 [아이템명]', desc: '상점에 아이템을 판매합니다. 예: /상점 판매 단검' },
  { cmd: '/상점판매', desc: '상점 판매 목록 보기' },
  { cmd: '/상점판매 무기', desc: '무기 상점에 판매' },
  { cmd: '/상점판매 방어구', desc: '방어구 상점에 판매' },
  { cmd: '/상점판매 잡화', desc: '잡화 상점에 판매' },
  { cmd: '/구매 [아이템명] [갯수]', desc: '아이템 구매. 예: /구매 나무검 1' },
  { cmd: '/판매 [아이템명] [갯수]', desc: '아이템 판매. 예: /판매 나무검 1' },
  { cmd: '/장착 나무검', desc: '무기 장착 예시' },
  { cmd: '/해제 무기', desc: '무기 해제' },
  { cmd: '/해제 방어구', desc: '방어구 해제' },
  { cmd: '/정보 홍길동', desc: '다른 유저 능력치 확인' },
  { cmd: '/귓 홍길동 안녕', desc: '귓속말 예시' },
  { cmd: '/착용 천공의 갑옷', desc: '방어구 착용 예시' },
  { cmd: '/입장', desc: '동굴/피라미드 입장' },
  { cmd: '/나가기', desc: '동굴/피라미드 나가기' },
  { cmd: '/길드 생성', desc: '길드 생성' },
  { cmd: '/길드 가입', desc: '길드 가입' },
  { cmd: '/길드 수락', desc: '길드 가입 수락' },
  { cmd: '/길드 탈퇴', desc: '길드 탈퇴' },
  { cmd: '/길드 추방', desc: '길드원 추방' },
  { cmd: '/길드 공지', desc: '길드 공지 등록' },
  { cmd: '/길드 정보', desc: '길드 정보 확인' },
  { cmd: '/길드 목록', desc: '길드 목록 확인' },
  { cmd: '/길드 해체', desc: '길드 해체(길드장)' },
  { cmd: '/길드 위임', desc: '길드장 권한 위임' },
  { cmd: '/길드 가입방식', desc: '길드 가입방식 변경' },
  { cmd: '/길드 신청목록', desc: '길드 가입 신청목록' },
  { cmd: '/비밀번호변경', desc: '비밀번호 변경 모달 열기' },
  { cmd: '/텔포 무인도', desc: '무인도 등 지역 이동' },
  { cmd: '/텔포 마을', desc: '마을 등 지역 이동' },
  { cmd: '/텔레포트', desc: '맵 내 랜덤 위치로 이동' },
  { cmd: '/클랜힐', desc: '클랜힐 스크롤 사용' },
  { cmd: '/사탕', desc: '사탕 버프 상태 확인' },
  { cmd: '/사용사탕', desc: '사탕 사용' },
  { cmd: '/저장', desc: '데이터 저장' },
  { cmd: '/랭킹', desc: 'TOP 10 스탯 랭킹' },
  { cmd: '/누구', desc: '현재 접속중인 플레이어 목록' },
  { cmd: '/지도', desc: '전체 맵 보기' },
  { cmd: '/장비', desc: '내 장비 정보' },
  { cmd: '/정보', desc: '내 능력치 확인' },
  { cmd: '/귓', desc: '귓속말(비공개 메시지)' },
  { cmd: '/귀환', desc: '1번 마을로 귀환' },
  { cmd: '/전 안녕하세요', desc: '전체 채팅 예시' },
  { cmd: '/동', desc: '오른쪽 이동' },
  { cmd: '/서', desc: '왼쪽 이동' },
  { cmd: '/남', desc: '아래 이동' },
  { cmd: '/북', desc: '위 이동' },
  { cmd: '/게시판', desc: '게시판 열기' },
];

router.get('/', (req, res) => {
  const commands = Object.keys(commandHandlers)
    .filter(cmd => cmd !== '/운영자') // 운영자 명령어 제외
    .map(cmd => ({
      cmd,
      desc: commandDescriptions[cmd] || '',
    }));
  // 추가로 지역채팅, 전체채팅 등도 넣을 수 있음
  commands.unshift(
    { cmd: '/전 <메시지>', desc: '전체 채팅(축약)' },
    { cmd: '<메시지>', desc: '지역 채팅(명령어 없이 입력)' }
  );
  // 예시 명령어 추가
  res.json([...commands, ...extraExamples]);
});

module.exports = router; 